<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Archived Training Drills</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/style.css">
</head>
<body class="bg-blue-50 text-gray-800 leading-relaxed">
  <%- include('_header') %>

  <main class="container mx-auto mt-8 p-4 md:px-8">
    <div class="main-content-background"></div>

    <section class="bg-white rounded-lg shadow-xl p-6 mb-8 border-t-4 border-gray-500">
      <h2 class="text-3xl font-bold mb-6 text-gray-700">Archived Drills</h2>

      <% if (archivedSessions.length === 0) { %>
        <p class="text-gray-600">No completed drills found yet.</p>
      <% } %>

      <% archivedSessions.forEach(session => { %>
        <div class="mb-6 border border-gray-300 rounded-lg shadow p-4 bg-white">
          <h3 class="text-xl font-semibold text-gray-800 mb-2">
            <%= new Date(session.session_date).toLocaleDateString('en-GB') %> â€” <%= session.location %>
          </h3>
          <p class="text-sm text-gray-600 mb-2"><%= session.notes %></p>

          <ul class="mt-3 space-y-2">
            <% session.drills.forEach(drill => { %>
              <li class="p-3 bg-gray-100 border rounded">
                <p class="text-sm font-medium text-gray-800"><%= drill.drill_name %></p>
                <% if (drill.duration_minutes) { %>
                  <p class="text-sm text-gray-600">Duration: <%= drill.duration_minutes %> mins</p>
                <% } %>
                <% if (drill.description) { %>
                  <p class="text-sm text-gray-600">Description: <%= drill.description %></p>
                <% } %>
                <% if (drill.youtube_url) { 
                  const videoId = drill.youtube_url.split('v=')[1]?.split('&')[0];
                  const embedUrl = videoId ? `https://www.youtube.com/embed/${videoId}` : null;
                %>
                  <% if (embedUrl) { %>
                    <iframe class="mt-2 w-full max-w-md h-48" src="<%= embedUrl %>" frameborder="0" allowfullscreen></iframe>
                  <% } %>
                <% } %>
              </li>
            <% }) %>
          </ul>
        </div>
      <% }); %>
    </section>
  </main>

  <footer class="bg-gray-900 text-gray-300 p-6 mt-12">
    <div class="container mx-auto text-center text-sm">
      &copy; <%= new Date().getFullYear() %> Spirit of Youth Phoenix. All rights reserved.
    </div>
  </footer>
</body>
</html>
