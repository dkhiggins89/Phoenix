<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= player.name %> - Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-blue-50 text-gray-800 leading-relaxed">

  <%- include('../partials/_header') %>

  <main class="container mx-auto mt-8 p-4 md:px-8">
    <div class="main-content-background"></div>

    <section class="bg-white rounded-lg shadow-xl p-6 mb-8 border-t-4 border-blue-600">
      <h2 class="text-3xl font-bold mb-4 text-blue-800"><%= player.name %></h2>
      <p class="text-gray-700 mb-2">Position: <%= player.position %></p>
      <p class="text-gray-700 mb-4">Shirt Number: <%= player.shirt_number %></p>

      <% if (parents.length > 0) { %>
        <p class="text-sm text-gray-600 mb-2">Linked Parent(s): 
          <%= parents.map(p => p.username).join(', ') %>
        </p>
      <% } %>

      <% if (stats) { %>
        <div class="bg-gray-100 rounded p-4 mt-4">
          <h3 class="text-xl font-semibold mb-2 text-blue-700">Season Totals</h3>
          <ul class="text-sm text-gray-700 space-y-1">
            <li>Appearances: <%= stats.appearances %></li>
            <li>Goals: <%= stats.goals %></li>
            <li>Assists: <%= stats.assists %></li>
            <li>Minutes Played: <%= stats.minutes_played %></li>
            <li>Yellow Cards: <%= stats.yellow_cards %></li>
            <li>Red Cards: <%= stats.red_cards %></li>
          </ul>
        </div>
      <% } %>
    </section>

    <% if (matchStats && matchStats.length > 0) { %>
      <section class="bg-white rounded-lg shadow-xl p-6 mb-8 border-t-4 border-yellow-500">
        <h3 class="text-2xl font-bold mb-4 text-yellow-700">Match Performances</h3>

        <div class="space-y-4">
          <% matchStats.forEach(stat => { %>
            <div class="bg-white rounded-lg border border-gray-200 p-4 shadow-sm">
              <div class="text-lg font-semibold text-blue-800">
                <%= new Date(stat.match_date).toLocaleDateString('en-GB') %> vs <%= stat.opponent %>
                <% if (stat.result) { %>
                  â€” <span class="text-gray-600"><%= stat.result %></span>
                <% } %>
              </div>
              <div class="text-sm text-gray-700 mt-2">
                Goals: <%= stat.goals %> |
                Assists: <%= stat.assists %> |
                Minutes: <%= stat.minutes_played %> |
                Yellows: <%= stat.yellow_cards %> |
                Reds: <%= stat.red_cards %>
              </div>
            </div>
          <% }); %>
        </div>
      </section>
    <% } else { %>
      <section class="text-sm text-gray-600 text-center italic">
        No match performance data available yet.
      </section>
    <% } %>
